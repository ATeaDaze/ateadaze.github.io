<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<title>Rainbow Lines</title>		
<link href="jspaint.css" rel="stylesheet">

<script>
function globalActionListener(targetID, eventType)
{
	targetID.addEventListener(eventType, e => {
		xPos = e.offsetX;
		yPos = e.offsetY;
		drawCoords();
		if(bManualInput) drawLine();
	})
}

function drawLine()
{
//	x1 = Math.floor(Math.random() * 860);
//	y1 = Math.floor(Math.random() * 660);
	x2 = Math.floor(Math.random() * 860);
	y2 = Math.floor(Math.random() * 660);
	colorIndex = Math.floor(Math.random() * 7);
	ctx.beginPath();
	ctx.strokeStyle = lineColor[colorIndex];
	ctx.lineWidth = 2;
	ctx.moveTo(xPos, yPos);
	ctx.lineTo(x2, y2);		
	ctx.stroke();
	ctx.closePath();
}

function drawCoords()
{
	p1.innerHTML = "X = " + xPos;
	p1.innerHTML += "<br>";
	p1.append("Y = " + yPos);
}

function clearScreen()
{
	ctx.fillRect(0, 0, 800, 600);
}

/*function animateLines()
{
	var count = 0;
	window.requestAnimationFrame(function loop() {
		drawLine();	
		window.requestAnimationFrame(loop);
		count++;
		if(count == 100) {
			clearScreen();
			count = 0;
			}
		})
} */
</script>

</head>
<body onload="clearScreen()">

<div id="title">Rainbow Lines</div>
<div id="divCoords"><p id="p1">X = 0<br>Y = 0</p></div>

<script>
var bManualInput = true;
var x1, y1, x2, y2;
const lineColor = new Array("red", "orange", "yellow", "green", "blue", "indigo", "violet");

const canvas = document.createElement('canvas');
document.body.appendChild(canvas)
canvas.width = 800;
canvas.height = 600;
const ctx = canvas.getContext('2d');

var button1 = document.createElement("button");
var button1txt = document.createTextNode("Clear Screen");
button1.appendChild(button1txt);
document.body.appendChild(button1);
button1.onclick = function(){clearScreen()};

var myCheck = document.createElement('input');
myCheck.type = "checkbox";
var chkLabel = document.createElement('chkLabel');
chkLabel.appendChild(document.createTextNode(' Enable draw mode?'));
document.body.appendChild(myCheck);
document.body.appendChild(chkLabel);

globalActionListener(canvas, 'mousemove');
drawLine();

</script>

</body>
</html>
